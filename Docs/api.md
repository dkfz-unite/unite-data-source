# Data Source Service API
API alows to access the files, hosted by the application, by the url.

> [!Note]
> API is accessible for authorized users only and requires `JWT` token as `Authorization` header (read more about [Identity Service](https://github.com/dkfz-unite/unite-identity)).

## Overview
- get:[api](#get-api) - health check.
- get:[api/file/{key}]() - access the file by resource key.
- get:[api/bam/{key}]() - access the BAM file by resource key.
    - get:[api/bam/{key}/index]() - access the BAM index file.
    - get:[api/bam/{key}/hash]() - access the BAM hash file.
- get:[api/mtx/{key?}]() - access dense expressions matrix file (10xGenomics) by resource key.
    - get:[api/mtx/{key}/barcodes]() - access the barcodes file.
    - get:[api/mtx/{key}/features]() - access the features file.


## GET: [api](http://localhost:5300/api)
Health check.

### Response
`"2022-03-17T09:45:10.9359202Z"` - Current UTC date and time in JSON format, if service is up and running.


## GET: [api/file/{key}](http://localhost:5300/api/file/abc)
Access any file by it's resource key.

### Parameters
- `key` - resource key of the file, generated by the application, when the file metadata was uploaded.

### Response
Api responds with a file stream as an `application/octet-stream` content type allowing range requests.


## GET: [api/bam/{key}](http://localhost:5300/api/bam/abc)
Access the binary alignment map (BAM) file by it's resource key, if the file has `bam` format.

### Parameters
- `key` - resource key of the file, generated by the application, when the file metadata was uploaded.

### Response
Api responds with a file stream as an `application/octet-stream` content type allowing range requests.


## GET: [api/bam/{key}/index](http://localhost:5300/api/bam/abc/index)
Access the BAM index file by it's resource key, if the file has `bam` format.

### Parameters
- `key` - resource key of the file, generated by the application, when the file metadata was uploaded.

### Response
Api responds with a file stream as an `application/octet-stream` content type allowing range requests.


## GET: [api/bam/{key}/hash](http://localhost:5300/api/bam/abc/hash)
Access the BAM hash file by it's resource key, if the file has `bam` format.

### Parameters
- `key` - resource key of the file, generated by the application, when the file metadata was uploaded.

### Response
Api responds with a file stream as an `application/octet-stream` content type allowing range requests.


## GET: [api/mtx/{key?}](http://localhost:5300/api/mtx/abc)
Access the dense expressions matrix file (10xGenomics) by it's resource key, if the file has `mtx` format.

### Parameters
- `key` - resource key of the file, generated by the application, when the file metadata was uploaded.

### Response
Api responds with a file stream as an `application/octet-stream` content type allowing range requests.


## GET: [api/mtx/{key}/barcodes](http://localhost:5300/api/mtx/abc/barcodes)
Access the barcodes file of the dense expressions matrix (10xGenomics) by it's resource key, if the file has `mtx` format.

### Parameters
- `key` - resource key of the file, generated by the application, when the file metadata was uploaded.

### Response
Api responds with a file stream as an `application/octet-stream` content type allowing range requests.


## GET: [api/mtx/{key}/features](http://localhost:5300/api/mtx/abc/features)
Access the features file of the dense expressions matrix (10xGenomics) by it's resource key, if the file has `mtx` format.

### Parameters
- `key` - resource key of the file, generated by the application, when the file metadata was uploaded.

### Response
Api responds with a file stream as an `application/octet-stream` content type allowing range requests.
